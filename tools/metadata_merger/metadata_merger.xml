<tool id="metadata_merger" name="Metadata Merger" version="0.0.1" python_template_version="3.5">
    <description>merges metadata with features table</description>
    <requirements>
        <requirement type="package" version="3.8.5">python</requirement>
        <requirement type="package" version="1.2.1">pandas</requirement>
    </requirements>
    <command detect_errors="exit_code"><![CDATA[
        python $__tool_directory__/metadata_merger.py --dataframe '$features_table' --extension '${features_table.ext}' --metadata '$metadata_table' --output '$merged_data'
    ]]></command>
    <inputs>
        <param name="features_table" type="data" format="csv,tabular, tsv" label="Sample-by-matrix data"/>
        <param name="metadata_table" type="data" format="tsv, tabular" label="Metadata table"/>
    </inputs>
    <outputs>
        <data name="merged_data" format="csv" label="${features_table.name} with metadata"/>
    </outputs>
    <tests>
        <test>
            <param name="features_table" value="xcms-test.tsv" ftype="tabular"/>
            <param name="metadata_table" value="metadata-test.tsv" ftype="tsv"/>
            <output name="merged_data" file="xcms-merged.csv" ftype="csv"/>
        </test>
        <test>
            <param name="features_table" value="aplcms_converted-test.csv" ftype="csv"/>
            <param name="metadata_table" value="metadata-test.tsv" ftype="tsv"/>
            <output name="merged_data" file="aplcms_converted-merged.csv" ftype="csv"/>
        </test>
    </tests>
    <help><![CDATA[
        A simple tool to merge samples metadata with features table.
        
        **Workflow position**

        - Upstream tools: `apLCMS to RamClustR converter <https://github.com/RECETOX/galaxytools/tree/master/tools/aplcms_to_ramclustr_converter>`_ or `XCMS fillChromPeaks <https://github.com/workflow4metabolomics/tools-metabolomics>`_

        - Downstream tools: `RamClustR <https://github.com/RECETOX/galaxytools/tree/master/tools/ramclustr>`_ (CSV) or WaveICA
    ]]></help>
</tool>