<tool id="ipapy2_compute_all_adducts" name="IPA compute all adducts" version="@TOOL_VERSION@+galaxy0" profile="21.05">
    <macros>
        <import>macros.xml</import>
    </macros>
    
    <requirements>
        <requirement type="package" version="@TOOL_VERSION@">ipapy2</requirement>
        <expand macro="extra_requirements"/>
    </requirements>

    <command detect_errors="exit_code"><![CDATA[
        python3 '${__tool_directory__}/ipapy2_compute_all_adducts.py'
        --input_dataset_adduct '${adducts_data}' '${adducts_data.ext}'
        --input_dataset_database ${MS1_DB} ${MS1_DB.ext}
        --ionisation ${ionisation}
        --output_dataset '${all_adducts}' '${all_adducts.ext}'
        --ncores \${GALAXY_SLOTS:-1}
    ]]></command>
    <inputs>
        <param label="Adducts data" name="adducts_data" type="data" format="csv,tsv,tabular,parquet" help="A csv,tsv,tabular or parquet file containing information on all possible adducts."/>
        <param label="MS database" name="MS1_DB" type="data" format="csv,tsv,tabular,parquet" help="A csv,tsv,tabular or parquet file containing the MS1 database."/>
        <expand macro="ionisation"/>
    </inputs>

    <outputs>
        <data label="${tool.name} on ${on_string}" name="all_adducts" format_source="adducts_data"/>
    </outputs>
    
    <tests>
        <test>
            <param name="adducts_data" value="adducts.csv"/>
            <param name="MS1_DB" value="MS1_DB.csv"/>
            <param name="ionisation" value="1"/>
            <output name="all_adducts" file="all_adducts.csv"/>
        </test>
    </tests>
    
    <help><![CDATA[
    ::
        compute all adducts table based on the information present in the database
    ]]></help>

    <expand macro="citations"/>
</tool>