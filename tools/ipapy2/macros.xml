<macros>
    <token name="@TOOL_VERSION@">1.3.0</token>

    <xml name="citations">
        <citations>
        <citation type="doi">10.1021/acs.analchem.9b02354</citation>
        <citation type="doi">10.1093/bioinformatics/btad455</citation>
        </citations>
    </xml>

    <xml name="ionisation">
        <param label="ionisation" name="ionisation" type="select" help="ionisation. positive +1 or negative -1">
            <option value="1">positive</option>
            <option value="-1">negative</option>
        </param>
    </xml>

    <xml name="bio_connections">
        <param label="connections list provided" name="connection_list" type="select" optional="true" multiple="true" display="checkboxes">
            <help>list of possible connections between compounds defined as formulas. Only necessary if mode='connections'.</help>
            <option value="C3H5NO">C3H5NO</option>
            <option value="C6H12N4O">C6H12N4O</option>
            <option value="C4H6N2O2">C4H6N2O2</option>
        </param>
    </xml>

<token name="@init_import@">
import pandas as pd
from ipaPy2 import ipa
</token> 

<token name="@annotation_flatten@">
annotations_flat = pd.DataFrame()
for peak_id in annotations:
    annotation = annotations[peak_id]
    annotation["peak_id"] = peak_id
    annotations_flat = pd.concat([annotations_flat, annotation])
</token> 
</macros>